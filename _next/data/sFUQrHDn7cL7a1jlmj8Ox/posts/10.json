{"pageProps":{"postData":{"id":"10","title":"描述运算优先级","tags":["javascript"],"date":"2020-09-21","image":"/boboan.github.io/posts/10/1.png","abstract":"看 reduce 的时候，发现这个运算从左到右可以处理数组的优先级 先拿四则运算试一下 这个测试的值分为：值和运算符，值是字符串或数组 resolve 函数处理值","contentHtml":"<p>看reduce的时候，发现这个运算从左到右可以处理数组的优先级\n先拿四则运算试一下\n这个测试的值分为：值和运算符，值是字符串或数组\nresolve函数处理值\nOP处理运算符</p>\n<pre><code class=\"language-javascript\">const OP = {\n  '+': value => {\n    return next => Number(value) + Number(resolve(next))\n  },\n  '-': value => {\n    return next => Number(value) - Number(resolve(next))\n  },\n  '*': value => {\n    return next => Number(value) * Number(resolve(next))\n  },\n  '/': value => {\n    return next => Number(value) / Number(resolve(next))\n  }\n}\n\n// 是否为数组\nconst isArray = value => value instanceof Array\n// 是否为运算符\nconst isOP = value => OP.hasOwnProperty(value)\n\n// 处理数值\nconst resolve = value => {\n  return isArray(value) ? value.reduce(reducer) : value\n}\n\nconst reducer = (prev, next) => {\n  return isOP(next)\n    ? OP[next](resolve(prev))\n    : prev(resolve(next))\n}\n\nmodule.exports = reducer\n</code></pre>\n<p>测试一下</p>\n<pre><code class=\"language-javascript\">var reducer = require('./index')\n\n// ((2*(2+1))+10)/(1+1)=8\nconst EXP1 = [[[\"2\", '*', [\"2\", \"+\", \"1\"]], \"+\", \"10\"], \"/\", [\"1\", \"+\", \"1\"]]\n// ((5+2)/(1+2+3))+(2*5)=11.17\nconst EXP2 = [[[\"5\", '+', \"2\"], \"/\", [\"1\", \"+\", \"2\", \"+\", \"3\"]], \"+\", [\"2\", \"*\", \"5\"]]\n\ntest('EXP1', () => {\n  expect(EXP1.reduce(reducer)).toBe(((2 * (2 + 1)) + 10) / (1 + 1))\n})\n\ntest('EXP2', () => {\n  expect(EXP2.reduce(reducer)).toBe(((5 + 2) / (1 + 2 + 3)) + (2 * 5))\n})\n</code></pre>\n<p>拿exp1为例子，我的想法是：值与运算符计算，比如2*，数值2和运算符*，合成一个'二乘以'的计算函数，用于处理紧接着的值；计算函数与值计算时，返回计算后的值\n成功了\n<img src=\"/boboan.github.io/posts/10/1.png\"></p>\n<p>这样就能拿一个数组描述运算优先级了</p>\n"},"allTags":["nextjs","remark","typescript","taro","webpack","loader","小程序插件","javascript","react","extention","github page","screeps","nodejs","闲的","canvas","promise","vue","Parcel","eggjs","extension"]},"__N_SSG":true}